<!DOCTYPE html>
<html lang="en">
<head>
  <title>News and Events - Notre Dame Salem</title>

  <%- include("partials/head"); %>
  
  <link rel="stylesheet" href="out.css">
  <script src="https://kit.fontawesome.com/f3339b4404.js" crossorigin="anonymous"></script>
</head>
<body>
  <%- include("partials/loader"); %>
  <%- include("partials/header"); %>
  
  <main class="">
    <section class="p-8 bg-amber-100">
      <h2 class="font-semibold text-center">
        Latest News <button id="reloadNews" class="ml-2 text-lg text-slate-500 hover:bg-sky-300/50"><i class="fa-solid fa-arrows-rotate"></i></button>
      </h2>

      <div id="news" class="mt-8 w-fit mx-auto max-w-2xl grid sm:grid-cols-2 gap-4">
        <div id="newsSpinner" class="">
          <i class="mr-2 fa-solid fa-spinner animate-spin"></i> Loading...
        </div>
      </div>
    </section>
    
    <section class="p-4">
      <h2 class="mt-4 font-semibold text-center">
        Events
      </h2>

      <div id="events" class="mt-8 w-fit mx-auto max-w-2xl">
        <div id="eventsSpinner" class="">
          <i class="mr-2 fa-solid fa-spinner animate-spin"></i> Loading...
        </div>
      </div>
    </section>

    <h2 class="my-8 font-semibold text-center">
      Stay Tuned for upcoming events!
    </h2>
  </main>

  <%- include("partials/footer"); %>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
  
  <script src="scripts/index.js"></script>
  <script src="scripts/loadnews.js"></script>
  <script src="scripts/loadevents.js"></script>
  <script>
    window.addEventListener("load", () => {
      const firebaseappConfig = {
        apiKey: "AIzaSyB9S-lwz4yOHcajjQmFD8Qj9AynV-wZ0A0",
        authDomain: "ndhcs-361bf.firebaseapp.com",
        projectId: "ndhcs-361bf",
        storageBucket: "ndhcs-361bf.appspot.com",
        messagingSenderId: "644967053944",
        appId: "1:644967053944:web:ff6463c5e53ed7c0c5cb8d",
        measurementId: "G-4QGDHBZP09"
      }
     
      const app = firebase.initializeApp(firebaseappConfig)
      const analytics = firebase.analytics(app)
      const db = firebase.firestore(app)
      const storage = firebase.storage(app)

      const newsSpinner = document.getElementById("newsSpinner")
      document.getElementById("reloadNews")
        .addEventListener("click", e => {
          e.target.disabled = true
          newsSpinner.classList.remove("hidden")
          loadNews(db, true, true)
          e.target.remove()
        })
      
      loadNews(db, true)
      loadEvents(db, storage)
    })
  </script>
</body>
</html>